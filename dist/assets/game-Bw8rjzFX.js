/* empty css              */(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();const W="modulepreload",z=function(t){return"/"+t},O={},V=function(e,s,a){let n=Promise.resolve();if(s&&s.length>0){let d=function(m){return Promise.all(m.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),r=c?.nonce||c?.getAttribute("nonce");n=d(s.map(m=>{if(m=z(m),m in O)return;O[m]=!0;const u=m.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":W,u||(p.as="script"),p.crossOrigin="",p.href=m,r&&p.setAttribute("nonce",r),document.head.appendChild(p),u)return new Promise((y,L)=>{p.addEventListener("load",y),p.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(c){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=c,window.dispatchEvent(r),!r.defaultPrevented)throw c}return n.then(c=>{for(const r of c||[])r.status==="rejected"&&o(r.reason);return e().catch(o)})};function C(t,e,s){return t*(1-s)+e*s}function R(t,e){return t===e?t:Math.floor(Math.random()*(e-t+1)+t)}function Y(t){let e=2166136261;for(let s=0;s<t.length;s++)e^=t.charCodeAt(s),e=Math.imul(e,16777619)>>>0;return e>>>0}class X{constructor(e){typeof e=="string"?this.state=Y(e)||1:typeof e=="number"?this.state=e>>>0||1:this.state=1}next(){let e=(this.state+=1831565813)>>>0;return e=Math.imul(e^e>>>15,e|1)>>>0,e^=e+Math.imul(e^e>>>7,e|61)>>>0,((e^e>>>14)>>>0)/4294967296}randIRange(e,s){return e===s?e:Math.floor(this.next()*(s-e+1))+e}shuffle(e){for(let s=e.length-1;s>0;s--){const a=Math.floor(this.next()*(s+1)),n=e[s];e[s]=e[a],e[a]=n}return e}}function _(t){return new X(t)}function k(t){return new Promise((e,s)=>{if(t.complete&&t.naturalWidth!==0){e(t);return}t.onload=()=>e(t),t.onerror=a=>s(new Error(`Failed to load image: ${t.src}, ${a}`))})}class M{static _cache=new Map;static _playing=new Set;static async preloadSound(e){if(!this._cache.has(e)){const s=new Audio(e);s.preload="auto",await new Promise((a,n)=>{s.addEventListener("canplaythrough",a),s.addEventListener("error",n)}),this._cache.set(e,s)}}static playSound(e,s=0,a=!1,n=!1){let o;if(this._cache.has(e)?o=this._cache.get(e).cloneNode():o=new Audio(e),o.loop=a,this._playing.add(o),o.addEventListener("ended",()=>this._playing.delete(o)),o.addEventListener("pause",()=>{o.loop||this._playing.delete(o)}),s>0){o.volume=0;const c=20,r=s/c,d=setInterval(()=>{o.volume>=1?clearInterval(d):o.volume=Math.min(1,o.volume+1/c)},r);n&&a&&o.addEventListener("timeupdate",()=>{const m=o.duration-o.currentTime;m<=s&&(o.volume=Math.max(0,m/s))})}o.play().catch(c=>{console.warn(`Failed to play sound "${e}"`,c),this._playing.delete(o)})}static stopAll(){this._playing.forEach(e=>{e.pause(),e.currentTime=0}),this._playing.clear()}}const G=4498,A=2901,f={canvas:null,ctx:null,mapWidth:G,mapHeight:A,mapImg:new Image,knightPinImg:new Image,shadePinImg:new Image,camera:{x:0,y:0,targetX:0,targetY:0,zoom:.125,targetZoom:.125},mousePos:{x:0,y:0},mouseXRelative:0,mouseYRelative:0,isDragging:!1,dragStart:{x:0,y:0},hasMoved:!1,initialZoom:0,pinchStartDistance:0,zoomFocus:{x:0,y:0},isProgrammaticZoom:!1,guessPosition:null,lastFrameTime:0,fps:0,get mapCenter(){return{x:this.mapWidth/2,y:this.mapHeight/2}},init(t){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!0,this.knightPinImg.src="images/knightPin.png",this.shadePinImg.src="images/shadePin.png",Promise.all([k(this.knightPinImg),k(this.shadePinImg)]).catch(e=>{console.error("Failed to load one or more pin images:",e)}),this.addEventListeners(),this.resetCamera()},async changeMapImage(t,e){const s=document.getElementById("mapLoadingText");try{s&&(s.style.display="block"),this.mapImg.src=t,await k(this.mapImg),this.mapWidth=this.mapImg.width,this.mapHeight=this.mapImg.height,this.currentMapUrl=t,console.log(`Image loaded: ${t} (${this.mapWidth}x${this.mapHeight})`),this.resetCamera(),this.draw(),e&&e()}catch(a){console.error("Failed to load map image:",a)}finally{s&&(s.style.display="none")}},addEventListeners(){this.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.handleMouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.handleMouseUp.bind(this)),this.canvas.addEventListener("mouseleave",this.handleMouseLeave.bind(this)),this.canvas.addEventListener("wheel",this.handleWheel.bind(this)),this.canvas.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.canvas.addEventListener("touchmove",this.handleTouchMove.bind(this)),this.canvas.addEventListener("touchend",this.handleTouchEnd.bind(this))},handleMouseDown(t){if(document.body.classList.contains("modal-open"))return;const e=this.canvas.getBoundingClientRect();this.mousePos.x=t.clientX-e.left,this.mousePos.y=t.clientY-e.top,this.updateRelativeMousePos(),this.isDragging=!0,this.hasMoved=!1,this.dragStart.x=t.clientX,this.dragStart.y=t.clientY},handleMouseMove(t){if(document.body.classList.contains("modal-open"))return;const e=this.canvas.getBoundingClientRect();if(this.mousePos.x=t.clientX-e.left,this.mousePos.y=t.clientY-e.top,this.updateRelativeMousePos(),this.isDragging){const s=(t.clientX-this.dragStart.x)/this.camera.zoom,a=(t.clientY-this.dragStart.y)/this.camera.zoom;(s!==0||a!==0)&&(this.hasMoved=!0),this.camera.x+=s,this.camera.y+=a,this.camera.targetX=this.camera.x,this.camera.targetY=this.camera.y,this.dragStart.x=t.clientX,this.dragStart.y=t.clientY}},handleMouseUp(){if(document.body.classList.contains("modal-open")){this.isDragging=!1;return}!this.hasMoved&&b.gameState===g.guessing&&this.updateGuessPos(this.mouseXRelative,this.mouseYRelative),this.isDragging=!1},handleMouseLeave(){this.isDragging=!1},handleWheel(t){if(document.body.classList.contains("modal-open"))return;t.preventDefault();const e=this.canvas.getBoundingClientRect(),s=t.clientX-e.left,a=t.clientY-e.top;this.zoomFocus.x=s,this.zoomFocus.y=a;const n=Math.exp(-t.deltaY*.001),o=Math.min(Math.max(this.camera.targetZoom*n,.1),5);o!==this.camera.targetZoom&&(this.isProgrammaticZoom=!1),this.camera.targetZoom=o},handleTouchStart(t){document.body.classList.contains("modal-open")||(t.touches.length===1?(this.isDragging=!0,this.hasMoved=!1,this.dragStart.x=t.touches[0].clientX,this.dragStart.y=t.touches[0].clientY):t.touches.length===2&&(this.isDragging=!1,this.pinchStartDistance=Math.hypot(t.touches[0].clientX-t.touches[1].clientX,t.touches[0].clientY-t.touches[1].clientY),this.initialZoom=this.camera.targetZoom))},handleTouchMove(t){if(!document.body.classList.contains("modal-open")){if(t.touches.length===1&&this.isDragging){const e=this.canvas.getBoundingClientRect();this.mousePos.x=t.touches[0].clientX-e.left,this.mousePos.y=t.touches[0].clientY-e.top,this.updateRelativeMousePos();const s=(t.touches[0].clientX-this.dragStart.x)/this.camera.zoom,a=(t.touches[0].clientY-this.dragStart.y)/this.camera.zoom;(s!==0||a!==0)&&(this.hasMoved=!0),this.camera.x+=s,this.camera.y+=a,this.camera.targetX=this.camera.x,this.camera.targetY=this.camera.y,this.dragStart.x=t.touches[0].clientX,this.dragStart.y=t.touches[0].clientY}else if(t.touches.length===2){const e=this.canvas.getBoundingClientRect(),s=t.touches[0],a=t.touches[1],n=(s.clientX+a.clientX)/2-e.left,o=(s.clientY+a.clientY)/2-e.top;this.zoomFocus.x=n,this.zoomFocus.y=o;const r=Math.hypot(s.clientX-a.clientX,s.clientY-a.clientY)/this.pinchStartDistance,d=Math.min(Math.max(this.initialZoom*r,.1),5);d!==this.camera.targetZoom&&(this.isProgrammaticZoom=!1),this.camera.targetZoom=d}}},handleTouchEnd(){if(document.body.classList.contains("modal-open")){this.isDragging=!1;return}!this.hasMoved&&b.gameState===g.guessing&&this.updateGuessPos(this.mouseXRelative,this.mouseYRelative),this.isDragging=!1},updateRelativeMousePos(){const t=this.canvas.getBoundingClientRect();this.mouseXRelative=(this.mousePos.x-t.width/2)/this.camera.zoom-this.camera.x,this.mouseYRelative=(this.mousePos.y-t.height/2)/this.camera.zoom-this.camera.y},updateGuessPos(t,e){this.guessPosition={x:t,y:e},i.guessButton.disabled=!1,M.playSound("audio/pin_drop.ogg")},draw(){const t=performance.now();if(this.lastFrameTime){const h=t-this.lastFrameTime;h>0&&(this.fps=1e3/h)}this.lastFrameTime=t;const e=window.devicePixelRatio||1,s=this.canvas.getBoundingClientRect(),a=s.width,n=s.height;(this.canvas.width!==a*e||this.canvas.height!==n*e)&&(this.canvas.width=a*e,this.canvas.height=n*e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.scale(e,e);const o=this.camera.zoom;if(this.camera.x=C(this.camera.x,this.camera.targetX,.5),this.camera.y=C(this.camera.y,this.camera.targetY,.5),this.camera.zoom=C(this.camera.zoom,this.camera.targetZoom,.25),o!==this.camera.zoom&&!this.isProgrammaticZoom){const h=(this.zoomFocus.x-a/2)/o-this.camera.x,p=(this.zoomFocus.y-n/2)/o-this.camera.y;this.camera.x=(this.zoomFocus.x-a/2)/this.camera.zoom-h,this.camera.y=(this.zoomFocus.y-n/2)/this.camera.zoom-p,this.camera.targetX=this.camera.x,this.camera.targetY=this.camera.y}if(this.ctx.translate(a/2,n/2),this.ctx.scale(this.camera.zoom,this.camera.zoom),this.ctx.translate(this.camera.x,this.camera.y),!this.mapImg||!this.mapImg.complete||!this.mapImg.naturalWidth){this.ctx.restore();return}const c={left:-this.camera.x-a/2/this.camera.zoom,right:-this.camera.x+a/2/this.camera.zoom,top:-this.camera.y-n/2/this.camera.zoom,bottom:-this.camera.y+n/2/this.camera.zoom},r=Math.max(0,c.left),d=Math.max(0,c.top),m=Math.min(this.mapWidth,c.right)-r,u=Math.min(this.mapHeight,c.bottom)-d;if(m<=0||u<=0){this.ctx.restore();return}this.ctx.drawImage(this.mapImg,r,d,m,u,r,d,m,u),this.guessPosition&&((b.gameState===g.guessed||b.gameState===g.gameOver)&&(this.ctx.beginPath(),this.ctx.moveTo(this.guessPosition.x,this.guessPosition.y),this.ctx.lineTo(b.currentLocation[0],b.currentLocation[1]),this.ctx.strokeStyle="red",this.ctx.lineWidth=10/this.camera.zoom,this.ctx.stroke(),this.ctx.save(),this.ctx.translate(b.currentLocation[0],b.currentLocation[1]),this.ctx.scale(.5/this.camera.zoom,.5/this.camera.zoom),this.ctx.drawImage(this.shadePinImg,-this.shadePinImg.width/2,-this.shadePinImg.height/2),this.ctx.restore()),this.ctx.save(),this.ctx.translate(this.guessPosition.x,this.guessPosition.y),this.ctx.scale(.5/this.camera.zoom,.5/this.camera.zoom),this.ctx.drawImage(this.knightPinImg,-this.knightPinImg.width/2,-this.knightPinImg.height/2),this.ctx.restore()),this.ctx.restore()},resetCamera(){this.camera.targetX=-this.mapCenter.x,this.camera.targetY=-this.mapCenter.y,this.camera.targetZoom=.125},setCameraTarget(t,e,s){this.camera.targetX=-t,this.camera.targetY=-e,this.camera.targetZoom=s},fitPointsInView(t,e,s=100){this.isProgrammaticZoom=!0;const a=(t.x+e.x)/2,n=(t.y+e.y)/2;this.camera.targetX=-a,this.camera.targetY=-n;const o=Math.abs(t.x-e.x),c=Math.abs(t.y-e.y),r=this.canvas.getBoundingClientRect(),d=r.width,m=r.height,u=d/(o+s*2),h=m/(c+s*2);this.camera.targetZoom=Math.min(u,h,2)}};let B=[];const S="data/defaultImagePacks/";async function F(t,e,s,a=!1){const n={name:t.name,locations:e,map:s};if(a)if(typeof b.usedLocations<"u")b.usedLocations[t.gameModeId]=[];else if(console.warn("GameManager.usedLocations not initialized yet, attempting to wait..."),await new Promise(r=>setTimeout(r,100)),typeof b.usedLocations<"u")b.usedLocations[t.gameModeId]=[];else throw new Error("GameManager.usedLocations is not available. Ensure the game has fully loaded.");let o="custom";t.map.defaultMap==="images/game/defaultMaps/pharloom.png"&&(o="pharloom"),t.map.defaultMap==="images/game/defaultMaps/hallownest.png"&&(o="hallownest");const c={id:t.gameModeId,value:t.gameModeId,label:a?`${t.name} (Custom)`:t.name,img:t.thumbnail,description:t.description||"",author:t.author||"Unknown",imageCount:e.length,gameMapName:o};return T.addChoice(c),console.log("Pack Registered:",c.id),n}async function Z(t){try{const e=await JSZip.loadAsync(await t.arrayBuffer()),s=e.file("pack.json");if(!s)throw new Error("pack.json not found in zip");const a=JSON.parse(await s.async("text"));if(a.thumbnail){const r=e.file(a.thumbnail);if(r){const d=await r.async("blob");a.thumbnail=URL.createObjectURL(d)}else console.warn(`Thumbnail '${a.thumbnail}' not found in zip.`)}const n=await Promise.all(a.locations.map(async r=>{if(/^(https?:)?\/\//.test(r.image)||r.image.startsWith("blob:"))return[r.x,r.y,r.difficulty,r.image];const d=r.image.split("/").pop(),m=e.file(`images/${d}`);if(!m)throw new Error(`Image ${d} not found in zip`);const u=new Blob([await m.async("arraybuffer")]);return[r.x,r.y,r.difficulty,URL.createObjectURL(u)]}));let o={useCustomMap:!1,defaultMap:D};if(a.map)if(a.map.useCustomMap){const r=e.file(a.map.mapImage);if(!r)throw new Error(`Map image ${a.map.mapImage} not found in zip`);const d=new Blob([await r.async("arraybuffer")]);o={useCustomMap:!0,mapUrl:URL.createObjectURL(d)}}else a.map.defaultMap&&(o.defaultMap=a.map.defaultMap);const c=await F(a,n,o,!0);b.addGameModeData(a.gameModeId,c)}catch(e){console.error("Error loading custom image pack:",e),alert(`Error loading image pack: ${e.message}`)}}async function U(){try{const e=await fetch("data/defaultImagePacks/packList.json");if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);B=await e.json()}catch(e){console.error("Failed to load or parse data:",e),B=[]}const t={};try{for(const e of B)try{const s=await fetch(`${S}${e}/pack.json`);if(!s.ok){console.error(`Failed to load ${e} pack.json`);continue}const a=await s.json();a.thumbnail&&!/^(https?:)?\/\//.test(a.thumbnail)&&(a.thumbnail=`${S}${e}/${a.thumbnail}`);const n=a.locations.map(r=>{if(/^(https?:)?\/\//.test(r.image)||r.image.startsWith("blob:"))return[r.x,r.y,r.difficulty,r.image];const d=r.image.split("/").pop();return[r.x,r.y,r.difficulty,`${S}${e}/images/${d}`]});let o={useCustomMap:!1,defaultMap:D};a.map&&(a.map.useCustomMap?o={useCustomMap:!0,mapUrl:`${S}${e}/${a.map.mapImage}`}:a.map.defaultMap&&(o.defaultMap=a.map.defaultMap));const c=await F(a,n,o,!1);t[a.gameModeId]=c}catch(s){console.error(`Error loading ${e} pack:`,s)}return T.selectChoiceByIndex(0),t}catch(e){return console.error("Error loading location data:",e),{}}}const N=document.getElementById("customImagePack");N&&N.addEventListener("change",async t=>{const e=t.target.files[0];if(e){if(!e.name.endsWith(".zip")){alert("Please select a ZIP file"),t.target.value="";return}await Z(e),t.target.value=""}});class j{constructor(e,s=[]){this.container=e,this.options=s,this.selected=new Set,this.render()}render(){this.container.innerHTML="",this.container.classList.add("choices"),this.options.forEach(e=>{const s=document.createElement("div");s.className="choice",this.selected.has(e.id)&&s.classList.add("selected");const a=document.createElement("img");a.classList.add("choice-img"),a.onerror=function(){this.src="images/noThumbnail.svg",this.alt="No Thumbnail"},e.img?a.src=e.img:(a.src="images/noThumbnail.svg",a.alt="No Thumbnail"),s.appendChild(a);const n=document.createElement("div");n.classList.add("choiceTextContainer");const o=document.createElement("div");if(o.className="choice-info",e.author){const r=document.createElement("span");r.className="choice-author",r.textContent=`By ${e.author}`,o.appendChild(r)}if(e.imageCount!==void 0){const r=document.createElement("span");r.className="choice-image-count",r.textContent=`${e.imageCount} images`,o.appendChild(r)}const c=document.createElement("span");if(c.className="choice-label",c.textContent=e.label,e.gameMapName){const r=document.createElement("img");e.gameMapName==="hallownest"?r.src="images/knightPin.png":e.gameMapName==="pharloom"?r.src="images/hornetPin.png":r.src="images/customPin.png",r.className="choice-map-icon",n.appendChild(r)}n.appendChild(c),n.appendChild(o),s.appendChild(n),this.container.appendChild(s),s.addEventListener("click",()=>{this.selected.has(e.id)?(this.selected.delete(e.id),s.classList.remove("selected")):(this.selected.add(e.id),s.classList.add("selected"))})})}selectChoiceByIndex(e){if(e>=0&&e<this.options.length){const s=this.options[e];this.selected.add(s.id),this.render()}}getSelected(){return Array.from(this.selected)}getSelectedOptions(){return this.options.filter(e=>this.selected.has(e.id))}addChoice(e){this.options.push(e),this.render()}removeChoiceById(e){this.options=this.options.filter(s=>s.id!==e),this.selected.delete(e),this.render()}clearChoices(){this.options=[],this.selected.clear(),this.render()}}class H{constructor(){this.windows=new Map,this.modalOverlay=document.getElementById("modalOverlay"),this.currentlyOpen=null,document.addEventListener("keydown",e=>{const s=this.windows.get(this.currentlyOpen);e.key==="Escape"&&s?.closeOnEscape&&this.close()})}add({id:e,element:s,onOpen:a=()=>{},closeOnEscape:n=!1}){if(!s){console.error(`WindowManager: Element for window with id "${e}" not found.`);return}this.windows.set(e,{element:s,onOpen:a,closeOnEscape:n})}open(e){this.currentlyOpen&&this.windows.get(this.currentlyOpen)?.element.classList.remove("visible");const s=this.windows.get(e);if(!s){console.error(`WindowManager: Window with id "${e}" not found.`);return}const{element:a,onOpen:n}=s;document.body.classList.add("modal-open"),this.modalOverlay&&this.modalOverlay.classList.add("visible"),a.style.display="flex",setTimeout(()=>{a.classList.add("visible"),this.currentlyOpen=e,n();const o=a.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');o.length>0&&o[0].focus()},10)}close(){if(!this.currentlyOpen)return;const e=this.windows.get(this.currentlyOpen);e&&(e.element.classList.remove("visible"),e.element.addEventListener("transitionend",()=>{e.element.classList.contains("visible")||(e.element.style.display="none")},{once:!0})),this.currentlyOpen=null;const s=document.getElementById("loadingText")?.style.display!=="none",a=document.getElementById("mapLoadingText")?.style.display!=="none";!s&&!a&&(document.body.classList.remove("modal-open"),this.modalOverlay&&this.modalOverlay.classList.remove("visible"))}}class q{constructor(){this.toastContainer=document.createElement("div"),this.toastContainer.id="toast-container",document.body.appendChild(this.toastContainer)}displayToast=(e,s=5e3,{allowHTML:a=!1}={})=>{const n=document.createElement("div");return n.className="hk_toast",a?n.innerHTML=e:n.textContent=e,this.toastContainer.appendChild(n),n.offsetHeight,n.style.opacity="1",s&&setTimeout(()=>{this.dismissToast(n)},s),n};dismissToast=e=>{!e||!e.parentNode||(e.style.opacity="0",e.addEventListener("transitionend",()=>{e.remove()}))}}window.debugMode=!1;const D="images/game/defaultMaps/hallownest.png",T=new j(l("packChoices")),g={guessing:0,guessed:1,gameOver:2,gameMenu:3},K={attuned:{min:1,max:4},ascended:{min:4,max:7},radiant:{min:7,max:10}},w=new q,v=new H,i={},b={gameState:g.gameMenu,usedLocations:{},playOrders:{},playOrderPointers:{},currentLocation:null,currentRound:0,totalRounds:5,totalScore:0,roundScore:0,maxScore:5e3,lastFrameTime:0,timerLengthSeconds:60,timeLimitEnabled:!1,endTime:0,blurredModeEnabled:!1,blurTimeRemaining:0,totalBlurTime:2e4,imageIsLoaded:!1,seed:null,rng:null,minDifficulty:1,maxDifficulty:10,gameModeData:{},speedrunTimer:{_currentLocationTime:0,set currentLocationTime(t){this._currentLocationTime=t,l("locationTime").innerText=(t/1e3).toFixed(2)},get currentLocationTime(){return this._currentLocationTime},_totalTime:0,set totalTime(t){this._totalTime=t,l("totalTime").innerText=(t/1e3).toFixed(2)},get totalTime(){return this._totalTime}},init(t){M.preloadSound("audio/pin_drop.ogg"),M.preloadSound("audio/confirm.ogg"),M.preloadSound("audio/basic_button.ogg"),this.gameModeData=t,f.init(i.mapCanvas),Object.keys(this.gameModeData).forEach(e=>{this.usedLocations[e]||(this.usedLocations[e]=[])}),v.add({id:"options",element:i.gameOptionsWindow,onOpen:()=>{this.updateSelectedPacksDisplay(),this.gameState=g.gameMenu,i.startButton.innerText="Start Game",this.validaiteForm()}}),v.add({id:"gameover",element:i.gameOverWindow,onOpen:()=>{this.gameState=g.gameOver}}),v.add({id:"packChoices",element:i.packSelectWindow,onOpen:()=>{this.gameState=g.gameMenu}}),v.add({id:"confirmation",element:i.confirmationWindow,closeOnEscape:!0}),v.open("options"),this.setLocation(R(0,this.gameModeData.hallownest.locations.length),"hallownest",!1),this.addEventListeners(),this.gameLoop(),this.initializeOptionToggles()},addGameModeData(t,e){this.gameModeData[t]=e,this.usedLocations[t]=[]},gameLoop(){const t=performance.now(),e=this.lastFrameTime>0?t-this.lastFrameTime:0;if(this.lastFrameTime=t,this.gameState===g.guessing){if(this.speedrunTimer.currentLocationTime+=e,this.speedrunTimer.totalTime+=e,this.timeLimitEnabled){const s=this.endTime-t;s<=0?(i.timeLimitDisplay.innerText="0.00",f.guessPosition||f.updateGuessPos(f.mouseXRelative,f.mouseYRelative),this.guessButtonClicked()):i.timeLimitDisplay.innerText=(s/1e3).toFixed(2)}if(this.blurredModeEnabled)if(this.blurTimeRemaining>0){this.blurTimeRemaining-=e;const s=this.totalBlurTime,a=1-Math.max(0,this.blurTimeRemaining)/s,o=(1-(1-Math.pow(1-a,4)))*100;i.locationImgElement.style.filter=`blur(${o}px)`}else i.locationImgElement.style.filter="blur(0px)"}else i.locationImgElement.style.filter="";if(window.debugMode){i.debugWindow.style.display="block";const{camera:s,mousePos:a,mouseXRelative:n,mouseYRelative:o,guessPosition:c,fps:r}=f,m={"Game State":`${Object.keys(g).find(u=>g[u]===this.gameState)} (${this.gameState})`,Round:`${this.currentRound}/${this.totalRounds}`,Score:`${this.totalScore} (Round: ${this.roundScore})`,Seed:this.seed,"---":"Map",Cam:`X: ${s.x.toFixed(2)}, Y: ${s.y.toFixed(2)}`,Zoom:s.zoom.toFixed(3),Mouse:`X: ${a.x}, Y: ${a.y}`,"Rel Mouse":`X: ${n.toFixed(2)}, Y: ${o.toFixed(2)}`,Guess:c?`X: ${c.x.toFixed(2)}, Y: ${c.y.toFixed(2)}`:"null",Correct:this.currentLocation?`X: ${this.currentLocation[0]}, Y: ${this.currentLocation[1]}`:"null",FPS:r.toFixed(1)};i.debugText.textContent=Object.entries(m).map(([u,h])=>u==="---"?h:`${u.padEnd(10," ")}: ${h}`).join(`
`)}else i.debugWindow.style.display="none";f.draw(),b.gameState===g.gameMenu?i.newGameButton.style.display="none":i.newGameButton.style.display="block",requestAnimationFrame(()=>b.gameLoop())},addEventListeners(){if(!i.difficultySelector){console.error("DOM elements not initialized. Call initializeDOMElements() first.");return}document.getElementById("packSelectBackButton").addEventListener("click",()=>{v.open("options")}),i.difficultySelector.addEventListener("change",this.toggleCustomDifficultyDisplay.bind(this)),i.roundCountInput.addEventListener("input",this.updateRoundCounter.bind(this)),i.roundCountInput.addEventListener("input",this.validaiteForm.bind(this)),i.timerLengthInput.addEventListener("input",this.validaiteForm.bind(this)),i.seedInput.addEventListener("input",this.validaiteForm.bind(this)),i.minDifficultyInput.addEventListener("input",t=>{i.minDifficultyValue.textContent=t.target.value}),i.maxDifficultyInput.addEventListener("input",t=>{i.maxDifficultyValue.textContent=t.target.value}),i.guessButton.addEventListener("click",this.guessButtonClicked.bind(this)),i.minimiseButton.addEventListener("click",()=>{this.toggleMinimise()}),i.timeLimitEnabled.addEventListener("change",this.validaiteForm.bind(this)),i.minDifficultyInput.addEventListener("input",this.validaiteForm.bind(this)),i.maxDifficultyInput.addEventListener("input",this.validaiteForm.bind(this)),i.enableSeed.addEventListener("change",this.validaiteForm.bind(this)),l("blurTimeInput").addEventListener("change",this.validaiteForm.bind(this)),l("blurredModeEnabled").addEventListener("change",this.validaiteForm.bind(this)),document.getElementById("playAgainButton").addEventListener("click",this.restartGame.bind(this)),document.getElementById("mainMenuButton").addEventListener("click",()=>v.open("options")),document.getElementById("startButton").addEventListener("click",this.restartGame.bind(this)),document.getElementById("newGameButton").addEventListener("click",async()=>{this.gameState===g.guessing||this.gameState===g.guessed?await this.showConfirmationDialog("Return to menu? Your current game progress will be lost.")&&v.open("options"):v.open("options")}),document.getElementById("changePacksButton").addEventListener("click",()=>v.open("packChoices")),document.addEventListener("focusin",this._focusInHandler),document.getElementById("fullscreenButton").addEventListener("click",()=>this.toggleFullscreen()),document.addEventListener("keypress",this.handleKeyPress.bind(this)),i.changePacksButton.addEventListener("click",()=>{v.open("packChoices")})},handleKeyPress(t){t.code==="Space"&&this.guessButtonClicked(),t.key==="f"&&this.toggleFullscreen(),t.key==="m"&&this.toggleMinimise(),t.key==="~"&&(window.debugMode=!window.debugMode)},async restartGame(){this.speedrunTimer.currentLocationTime=0,this.speedrunTimer.totalTime=0,this.lastFrameTime=0,this.updateRoundCounter(),this.minDifficulty=Number(i.customDifficultyDiv.querySelector("#minDifficulty").value),this.maxDifficulty=Number(i.customDifficultyDiv.querySelector("#maxDifficulty").value),this.timeLimitEnabled=i.timeLimitEnabled.checked,this.timeLimitEnabled&&(this.timerLengthSeconds=Number(i.timerLengthInput.value)),this.blurredModeEnabled=i.blurredModeEnabled.checked;const t=l("mapLoadingText");t&&(t.style.display="block"),i.modalOverlay?.classList.add("visible"),document.body.classList.add("modal-open");const e=T.getSelected();if(e.length===0){console.error("No game mode selected, cannot start game");return}const s=e.map(r=>this.gameModeData[r]).filter(Boolean);if(s.length===0){console.error("No valid game modes selected, cannot start game");return}v.close(),this.totalBlurTime=i.blurTimeInput.value*1e3,console.log(this.totalBlurTime);const a=s[0],n=a.map?.useCustomMap&&a.map?.mapUrl?a.map.mapUrl:a.map?.defaultMap||D;await f.changeMapImage(n,()=>{const r=i.gameOptionsWindow?.classList.contains("visible")||i.gameOverWindow?.classList.contains("visible"),d=l("loadingText")?.style.display!=="none",m=t?.style.display!=="none";!r&&!d&&!m&&(i.modalOverlay?.classList.remove("visible"),document.body.classList.remove("modal-open"))});let o;const c=(i.seedInput?.value||"").toString().trim();i.enableSeed&&i.enableSeed.checked?c?this.seed=c:(o=(Date.now()^Math.floor(Math.random()*4294967295))>>>0>>>0,this.seed=String(o),i.seedInput&&(i.seedInput.value=this.seed)):(o=(Date.now()^Math.floor(Math.random()*4294967295))>>>0>>>0,this.seed=String(o),i.seedInput&&(i.seedInput.value=""));try{this.rng=_(this.seed)}catch(r){console.warn("Failed to create seeded RNG, falling back to Math.random",r),this.rng=null}seededIndicator.style.display=i.enableSeed&&i.enableSeed.checked?"block":"none";try{const r=i.difficultySelector.value;this.playOrders={},this.playOrderPointers={},this.combinedPlayOrder=[];for(const d of s){const m=this.filterByDifficulty(d.locations,r);if(!m||m.length===0){console.warn(`No valid locations for ${d.name} in selected difficulty.`);continue}const u=m.map(p=>d.locations.indexOf(p)),h=this.rng?.shuffle?this.rng.shuffle(u.slice()):u.sort(()=>Math.random()-.5);this.playOrders[d.id]=h,this.playOrderPointers[d.id]=0;for(const p of h)this.combinedPlayOrder.push({modeId:d.id,index:p})}if(this.combinedPlayOrder.length===0){console.error("No locations available for the selected modes/difficulty.");return}this.combinedPlayOrder=this.rng?.shuffle?this.rng.shuffle(this.combinedPlayOrder):this.combinedPlayOrder.sort(()=>Math.random()-.5),this.totalRounds=this.combinedPlayOrder.length,this.currentRound=0}catch(r){console.warn("Failed to build deterministic play order:",r)}this.totalScore=0,i.guessButton.disabled=!0,i.guessButton.innerText="Guess!",this.nextRound()},updateRoundCounter(){var t=Number(i.roundCountInput.value);(t<=0||isNaN(t))&&(t=i.roundCountInput.placeholder),this.totalRounds=t,i.roundElement.textContent=`${this.currentRound}/${this.totalRounds}`},toggleCustomDifficultyDisplay(){i.difficultySelector.value==="custom"?i.customDifficultyDiv.style.display="flex":i.customDifficultyDiv.style.display="none"},initializeOptionToggles(){i.gameOptionsWindow.querySelectorAll("[data-toggle-target]").forEach(e=>{const s=e.dataset.toggleTarget,a=l(s);if(!a){console.warn(`Toggle target element with ID "${s}" not found.`);return}const n=()=>{const o=e.checked;a.style.display=o?"flex":"none",e.id==="timeLimitEnabled"&&(i.timeLimitDisplay.style.display=o?"block":"none")};n(),e.addEventListener("change",n)})},toggleFullscreen(){b.gameState!==g.gameMenu&&i.mapContainer.classList.toggle("fullscreen")},toggleMinimise(){i.minimiseIcon.classList.contains("rotate180")?(i.minimiseIcon.classList.remove("rotate180"),i.mapCanvas.classList.remove("minimise"),i.mapContainer.classList.remove("minimise")):(i.minimiseIcon.classList.add("rotate180"),i.mapCanvas.classList.add("minimise"),i.mapContainer.classList.add("minimise"))},guessButtonClicked(){if(!i.guessButton.disabled){if(M.playSound("audio/basic_button.ogg"),this.gameState===g.guessing)this.calculateScore(),this.gameState=g.guessed,i.guessButton.disabled=!1,M.playSound("audio/confirm.ogg"),i.roundScoreDisplay.innerText=`You earned ${this.roundScore} points`,i.roundScoreDisplay.style.display="block",f.guessPosition&&this.currentLocation?f.fitPointsInView(f.guessPosition,{x:this.currentLocation[0],y:this.currentLocation[1]}):this.currentLocation&&f.setCameraTarget(this.currentLocation[0],this.currentLocation[1],1),this.currentRound>=this.totalRounds?(i.guessButton.innerText="End Game",this.gameState=g.gameOver):i.guessButton.innerText="Next Round";else if(this.gameState===g.guessed)this.currentRound<this.totalRounds?(i.mapContainer.classList.remove("fullscreen"),this.nextRound(),i.guessButton.disabled=!0,i.guessButton.innerText="Guess!"):(this.gameState=g.gameOver,this.guessButtonClicked());else if(this.gameState===g.gameOver){i.guessButton.disabled=!0,this.timeLimitEnabled?(i.timerLengthDisplay.style.display="block",i.timerLengthDisplay.innerText=`Timer Length: ${this.timerLengthSeconds}s`):i.timerLengthDisplay.style.display="none",v.open("gameover"),i.finalScoreDisplay.innerText=`Final Score: ${this.totalScore}/${this.totalRounds*this.maxScore}`;const t=(this.totalScore/(this.totalRounds*this.maxScore)*100).toFixed(2);i.accuracyElement.innerText=`Accuracy: ${t}%`,i.totalRoundsElement.innerText=`Total Rounds: ${this.totalRounds}`,this.seed!=null&&(i.seedDisplay.innerText=`Seed: ${this.seed}`)}}},setLocation(t,e,s=!0){this.imageIsLoaded=!1,f.guessPosition=null;const a=this.gameModeData[e];if(!a||!a.locations||t<0||t>=a.locations.length){console.error("Invalid game mode or location index:",{index:t,gameMode:e,modeData:a});return}if(this.currentLocation=a.locations[t],!this.currentLocation||!this.currentLocation[3]){console.error("Invalid current location or image path:",this.currentLocation);return}const n=this.currentLocation[3];i.locationImgElement.classList.add("hideLocationImg"),l("blurBg").classList.add("hideLocationImg"),i.locationImgElement.style.opacity="0",i.locationImgElement.style.transition="opacity 0.4s ease",l("loadingText").style.display="flex",i.modalOverlay&&i.modalOverlay.classList.add("visible"),document.body.classList.add("modal-open"),i.locationImgElement.onload=null,i.locationImgElement.onerror=null,i.locationImgElement.onload=()=>{s&&(this.gameState=g.guessing,this.speedrunTimer.currentLocationTime=0),l("loadingText").style.display="none",i.locationImgElement.style.display="block",setTimeout(()=>{i.locationImgElement.style.opacity="1",i.locationImgElement.classList.remove("hideLocationImg"),l("blurBg").classList.remove("hideLocationImg")},10);const o=l("mapLoadingText"),c=i.gameOptionsWindow&&i.gameOptionsWindow.classList.contains("visible")||i.gameOverWindow&&i.gameOverWindow.classList.contains("visible"),r=o&&o.style.display!=="none";!c&&!r&&(i.modalOverlay&&i.modalOverlay.classList.remove("visible"),document.body.classList.remove("modal-open")),f.guessPosition&&(i.guessButton.disabled=!1),this.timeLimitEnabled&&(this.endTime=performance.now()+this.timerLengthSeconds*1e3),this.blurredModeEnabled&&(this.blurTimeRemaining=this.totalBlurTime)},i.locationImgElement.onerror=o=>{console.error("Failed to load location image:",{path:n,error:o}),l("loadingText").style.display="none";const c=l("mapLoadingText"),r=i.gameOptionsWindow&&i.gameOptionsWindow.classList.contains("visible")||i.gameOverWindow&&i.gameOverWindow.classList.contains("visible"),d=c&&c.style.display!=="none";!r&&!d&&(i.modalOverlay&&i.modalOverlay.classList.remove("visible"),document.body.classList.remove("modal-open"))},l("locationImg").src=n,l("blurBg").style.backgroundImage=`url(${n})`},filterByDifficulty(t,e){if(e==="all")return t;if(e==="custom")return t.filter(a=>a[2]>=this.minDifficulty&&a[2]<=this.maxDifficulty);const s=K[e];return s?t.filter(a=>a[2]>=s.min&&a[2]<=s.max):(console.warn("Unknown difficulty selected:",e),t)},async nextRound(){i.roundScoreDisplay.style.display="none",f.resetCamera(),this.currentRound++,this.updateRoundCounter();const t=T.getSelected();if(!t||t.length===0){console.error("No game modes selected."),this.endGame();return}const e=i.difficultySelector.value;let s=[];for(const y of t){const L=this.gameModeData[y]?.locations;if(!L)continue;this.usedLocations[y]||(this.usedLocations[y]=[]);const E=this.filterByDifficulty(L,e),P=this.usedLocations[y],I=E.map((x,$)=>$).filter(x=>!P.includes(x));for(const x of I)s.push({modeId:y,dataList:L,filtered:E,index:x})}if(s.length===0){console.warn("No available locations left. Resetting and repeating locations."),w.displayToast("All unique locations have been used. Locations will now repeat.");for(const y of t)this.usedLocations[y]&&(this.usedLocations[y]=[]);for(const y of t){const L=this.gameModeData[y]?.locations;if(!L)continue;const E=this.filterByDifficulty(L,e),P=E.map((I,x)=>x);for(const I of P)s.push({modeId:y,dataList:L,filtered:E,index:I})}if(s.length===0){console.error("No locations found for the selected difficulty, even after reset."),this.endGame();return}}let a;if(this.rng){const y=this.rng.randIRange(0,s.length-1);a=s[y]}else{const y=R(0,s.length-1);a=s[y]}const{modeId:n,dataList:o,filtered:c,index:r}=a,d=this.usedLocations[n],m=c[r],u=o.indexOf(m);if(u===-1){console.error(`Location not found in game mode ${n}`),this.endGame();return}d.push(r);const h=this.gameModeData[n],p=h.map?.useCustomMap&&h.map?.mapUrl?h.map.mapUrl:h.map?.defaultMap||D;f.currentMapUrl!==p&&await f.changeMapImage(p),this.startRoundWithLocation(u,n)},startRoundWithLocation(t,e){this.setLocation(t,e),i.guessButton.disabled=!0,f.guessPosition=null,this.timeLimitEnabled&&(this.endTime=performance.now()+this.timerLengthSeconds*1e3)},endGame(){this.gameState=g.gameOver,this.guessButtonClicked()},calculateScore(){if(!f.guessPosition||!this.currentLocation){this.roundScore=0;return}const t=f.guessPosition.x-this.currentLocation[0],e=f.guessPosition.y-this.currentLocation[1],s=Math.sqrt(t*t+e*e),n=Math.round(this.maxScore*Math.exp(-.001*(s-50)));this.roundScore=Math.min(n,this.maxScore),this.totalScore+=this.roundScore},validationToasts:{},showValidationToast(t,e){this.validationToasts[t]||(this.validationToasts[t]=w.displayToast(e,0))},dismissValidationToast(t){this.validationToasts[t]&&(w.dismissToast(this.validationToasts[t]),delete this.validationToasts[t])},async validaiteForm(){let t=!0;if(T.getSelected().length===0?(this.showValidationToast("pack","Please select at least one image pack."),t=!1):this.dismissValidationToast("pack"),i.timeLimitEnabled.checked){const s=Number(i.timerLengthInput.value);s<=0||isNaN(s)?(this.showValidationToast("timer","Timer length must be a number greater than 0."),t=!1):this.dismissValidationToast("timer")}else this.dismissValidationToast("timer");const e=Number(i.roundCountInput.value);if(e<=0||isNaN(e)?(this.showValidationToast("rounds","Rounds must be a number greater than 0."),t=!1):this.dismissValidationToast("rounds"),i.difficultySelector.value==="custom"){const s=Number(i.minDifficultyInput.value),a=Number(i.maxDifficultyInput.value);s<1||s>10||isNaN(s)?(this.showValidationToast("minDiff","Min difficulty must be between 1-10."),t=!1):this.dismissValidationToast("minDiff"),a<1||a>10||isNaN(a)?(this.showValidationToast("maxDiff","Max difficulty must be between 1-10."),t=!1):this.dismissValidationToast("maxDiff"),s>a?(this.showValidationToast("diffRange","Min difficulty cannot be greater than max."),t=!1):this.dismissValidationToast("diffRange")}else this.dismissValidationToast("minDiff"),this.dismissValidationToast("maxDiff"),this.dismissValidationToast("diffRange");if(i.enableSeed&&i.enableSeed.checked){const s=(i.seedInput?.value||"").toString().trim();let a=!0;s.length===0?(this.showValidationToast("seed","Seed cannot be empty."),a=!1,t=!1):s.includes(" ")?(this.showValidationToast("seed","Seed cannot contain spaces."),a=!1,t=!1):s.length>100&&(this.showValidationToast("seed","Seed cannot be longer than 100 characters."),a=!1,t=!1),a&&(this.dismissValidationToast("seed"),this.handleSeedEasterEggs(s))}else this.dismissValidationToast("seed");if(i.blurredModeEnabled.checked){const s=Number(i.blurTimeInput.value);s<=0||isNaN(s)?(this.showValidationToast("blurTime","Blur time must be a number greater than 0."),t=!1):this.dismissValidationToast("blurTime")}else this.dismissValidationToast("blurTime");t?(i.startButton.style.pointerEvents="auto",i.startButton.style.opacity="1"):(i.startButton.style.pointerEvents="none",i.startButton.style.opacity="0.25")},async handleSeedEasterEggs(t){const e=t.toLowerCase();if(["brainrot","skibidi","rizz","gyatt","fanum","sigma","delulu","Ohio","6-7","6_7","6.7","sixseven","six-seven","aura","sybau","cringe","NPC","glazing","mewing","zesty","nocap","ong","bussin"].some(a=>e.includes(a))||t==="67")this.showValidationToast("seed","Seed cannot contain brainrot."),formValid=!1;else if(t==="69")w.displayToast("Nice.");else if(e.includes("yalikejazz")){const{egg:a}=await V(async()=>{const{egg:n}=await import("./egg-wjA0cPBO.js");return{egg:n}},[]);w.displayToast(a,1e4,{allowHTML:!0})}else e.includes("biticalifi")?this.showValidationToast("seed","Seed cannot contain cool people."):t==="rickroll"?(w.displayToast("gottem"),window.open("https://www.youtube.com/watch?v=dQw4w9WgXcQ","_blank")):e.includes("squirrel")?w.displayToast("üêøÔ∏è"):e.includes("dawndishsoap")&&w.displayToast('<img src="images/soap.jpeg" style="width:100%; border-radius:8px;" alt="dawn dish soap" />',1200,{allowHTML:!0})},updateSelectedPacksDisplay(){const t=l("selected-packs-list");t&&(t.innerHTML=T.getSelectedOptions().map(e=>{let s="";if(e.gameMapName){let a="images/customPin.png";e.gameMapName==="hallownest"?a="images/knightPin.png":e.gameMapName==="pharloom"&&(a="images/hornetPin.png"),s=`<img src="${a}" class="choice-map-icon" alt="${e.gameMapName} map icon">`}return`<span class="pack-tag">${s}${e.label}</span>`}).join(""))},showConfirmationDialog(t){return new Promise(e=>{i.confirmationMessage.textContent=t;const s=i.confirmationButtons;s.innerHTML="";const a=document.createElement("button");a.className="hk-button",a.textContent="Confirm";const n=document.createElement("button");n.className="hk-button",n.textContent="Cancel",s.append(a,n);const o=c=>{v.close(),e(c)};a.addEventListener("click",()=>o(!0),{once:!0}),n.addEventListener("click",()=>o(!1),{once:!0}),v.open("confirmation")})}};function J(){i.customDifficultyDiv=l("customDifficultyDiv"),i.difficultySelector=l("difficultySelector"),i.roundCountInput=l("roundCount"),i.timerLengthInput=l("timerLength"),i.accuracyElement=l("accuracy"),i.finalScoreDisplay=l("finalScore"),i.gameOverWindow=l("gameOverWindow"),i.gameOptionsWindow=l("gameOptionsWindow"),i.loadingText=l("loadingText"),i.roundElement=l("round"),i.timeLimitDisplay=l("timeLimitDisplay"),i.totalRoundsElement=l("totalRounds"),i.timerLengthDisplay=l("timerLengthDisplay"),i.newGameButton=l("newGameButton"),i.startButton=l("startButton"),i.mainMenuButton=l("mainMenuButton"),i.timeLimitEnabled=l("timeLimitEnabled"),i.minDifficultyInput=l("minDifficulty"),i.maxDifficultyInput=l("maxDifficulty"),i.minDifficultyValue=l("minDifficultyValue"),i.maxDifficultyValue=l("maxDifficultyValue"),i.formWarning=l("formWarning"),i.guessButton=l("guessButton"),i.locationImgElement=l("locationImg"),i.mapCanvas=l("mapCanvas"),i.mapContainer=l("mapContainer"),i.roundScoreDisplay=l("roundScoreDisplay"),i.minimiseButton=l("minimiseButton"),i.gameMode=l("gameMode"),i.minimiseIcon=l("minimiseIcon"),i.fullscreenButton=l("fullscreenButton"),i.seedInput=l("seedInput"),i.seedDisplay=l("seedDisplay"),i.enableSeed=l("enableSeed"),i.seedOption=l("seedOption"),i.timerLengthOption=l("timerLengthOption"),i.modalOverlay=l("modalOverlay"),i.seededIndicator=l("seededIndicator"),i.packSelectWindow=l("packSelectWindow"),i.packChoices=l("packChoices"),i.confirmationWindow=l("confirmationWindow"),i.confirmationMessage=l("confirmationMessage"),i.confirmationButtons=l("confirmationButtons"),i.changePacksButton=l("changePacksButton"),i.blurredModeEnabled=l("blurredModeEnabled"),i.debugWindow=l("debugWindow"),i.debugText=l("debugText"),i.blurTimeInput=l("blurTimeInput")}function l(t){return document.getElementById(t)}async function Q(){console.log("DOM Loaded!"),J();const t=await U();b.init(t)}document.addEventListener("DOMContentLoaded",Q);
